#列族数据库
##列族数据库的定义
列族数据库将数据存储在列族中，而列族数据库里的行则把许多列族数据与本行的”行键“关联起来。

常见的列族数据库有：

* Cassandra
* HBase
* Hypertable
* Amazon DynamoDB

Cassandra的基本单元叫做“列”。它的列由一个“名值对”组成，其中的名字也充当关键字。每个键值对都占据一列，并且都存有一个“时间戳”值。数据过期使用的是时间戳，若某列数据不再用，则用“压缩”来回收空间。

标准列族：列族中的列都是简单列。

超列：某列中包含一个由小列组成的映射表。映射表即为值。超列可视为列容器。

Cassandra将标准列族和超列都放入“键空间”里，键空间与关系数据库里的数据库类似。

注：必须先建立键空间，才可以添加删除列族。
##列族数据库特性
###一致性

若某节点故障，则其存储数据会移交给其他节点，而当它重新上线时，数据库会把变更后的数据交还此节点。这种技术叫“提示移交”，可以帮之故障节点更快恢复。

###事务
Cassandra的写入操作在“行”级别是“原子的”，也就是说，根据某个给定的行键向行中插入或更新多个列，将算作一个写入操作，要么成功，要么失败。

写操作首先会写在“提交日志”及“内存表”中，只有它向这两者写入数据后，才算顺利完成。若某节点故障，稍后可根据“提交日志”将数据变更恢复至该节点中，这与Oracle数据库中的“重做日志”类似。
###可用性
Cassandra的设计极具“可用性”，因为集群里没有主节点，其中每个节点地位等同。减少操作请求的“一致性”级别，即可提升集群“可用性”。

可用性受制于(R+W)>N这一公式

>N=3，W=2，R=2,则可读可写
>
>N=3，W=2，R=1,则可读不可写
>
>N=3，W=1，R=2,则可写不可读
>
>所以，一致性与可用性二者需要权衡

###查询功能
Cassandra没有功能丰富的查询语言，所以在设计数据模型时，应优化列与列族以提升数据读取进度。

**基本查询**
>Cassandra客户端基本查询包括：GET,SET和DEL。
>查询数据必须先执行键空间命令：
`use ecommerce;`



在键空间中使用列族前必先定义它。

**高级查询与索引编订**

>Cassandra的列族可以用关键字之外的其他列当索引。这些索引以“位映射图”的形式实现，在列中频繁出现重复数值的情况下，性能较好。

**Cassandra查询语言（CQL）**
>Cassandra支持一种类似SQL命令的查询语言，叫Cassandra查询语言——CQL。

>CQL并不包括SQL的全部功能。也不支持“连接”（JOIN）及“子查询”，且其where子句通常页较简单。
###可扩展性
在已有的Cassandra集群中扩展，页就意味着增加更多节点。因为不存在主节点，所以向集群中新增节点后，即可改善其服务能力，令其可以处理更多的写入及读取操作。这种横向扩展可以尽力提高其正常运行时间，因为集群在新增节点时，仍能处理客户端请求。
##适用案例
* 时间记录
* 内容管理系统与博客平台
* 计数器
* 限期使用，时限单位为秒，过期自动删除。
##不适用场合
* 需以“ACID事务”执行写入及读取操作的系统
* 在开发早期原型或刚开始试探某个技术方案时


